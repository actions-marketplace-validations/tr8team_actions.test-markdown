import { None, Some } from "../core/option";
import { emoji, resultToColor, resultToMarkdown } from "../util";
class CodeQualityReportConverter {
    convertHeader(header) {
        return this.convertTable(header).andThen((badge) => {
            if (header.data.type === "code-quality") {
                const f = emoji(header.data.result);
                const h = `##### ${f}  ${header.name}\n`;
                const result = `
        **Quality Rating**: ${header.data.qualityRating}\\
`;
                const policy = resultToMarkdown(header.data.resultDetails);
                return Some(`
 ${h}
 Report: ${badge}
 ${result}
${policy}
`);
            }
            return None();
        });
    }
    convertTable(table) {
        if (table.data.type === "code-quality") {
            const color = resultToColor(table.data.result);
            const d = table.data;
            return Some(`[![badge](https://img.shields.io/badge/quality` +
                `-${d.qualityRating}` +
                `-${color})](${table.url})`);
        }
        return None();
    }
}
export { CodeQualityReportConverter };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29kZS1xdWFsaXR5LXJlcG9ydC1jb252ZXJ0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL2NvbnZlcnRlci9jb2RlLXF1YWxpdHktcmVwb3J0LWNvbnZlcnRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQUUsSUFBSSxFQUFVLElBQUksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sU0FBUyxDQUFDO0FBRWpFLE1BQU0sMEJBQTBCO0lBQzlCLGFBQWEsQ0FBQyxNQUFtQjtRQUMvQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDakQsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLEVBQUU7Z0JBQ3ZDLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNwQyxNQUFNLENBQUMsR0FBRyxTQUFTLENBQUMsS0FBSyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUM7Z0JBQ3pDLE1BQU0sTUFBTSxHQUFHOzhCQUNPLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYTtDQUN0RCxDQUFDO2dCQUNNLE1BQU0sTUFBTSxHQUFHLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7Z0JBQzNELE9BQU8sSUFBSSxDQUFDO0dBQ2pCLENBQUM7V0FDTyxLQUFLO0dBQ2IsTUFBTTtFQUNQLE1BQU07Q0FDUCxDQUFDLENBQUM7YUFDSTtZQUNELE9BQU8sSUFBSSxFQUFFLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsWUFBWSxDQUFDLEtBQWtCO1FBQzdCLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxFQUFFO1lBQ3RDLE1BQU0sS0FBSyxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQy9DLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFDckIsT0FBTyxJQUFJLENBQ1QsZ0RBQWdEO2dCQUM5QyxJQUFJLENBQUMsQ0FBQyxhQUFhLEVBQUU7Z0JBQ3JCLElBQUksS0FBSyxNQUFNLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FDOUIsQ0FBQztTQUNIO1FBQ0QsT0FBTyxJQUFJLEVBQUUsQ0FBQztJQUNoQixDQUFDO0NBQ0Y7QUFFRCxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnZlcnRlciB9IGZyb20gXCIuLi9pbnRlcmZhY2UvY29udmVydGVyXCI7XG5pbXBvcnQgeyBEYXRhRWxlbWVudCB9IGZyb20gXCIuLi9pbnB1dFwiO1xuaW1wb3J0IHsgTm9uZSwgT3B0aW9uLCBTb21lIH0gZnJvbSBcIi4uL2NvcmUvb3B0aW9uXCI7XG5pbXBvcnQgeyBlbW9qaSwgcmVzdWx0VG9Db2xvciwgcmVzdWx0VG9NYXJrZG93biB9IGZyb20gXCIuLi91dGlsXCI7XG5cbmNsYXNzIENvZGVRdWFsaXR5UmVwb3J0Q29udmVydGVyIGltcGxlbWVudHMgQ29udmVydGVyIHtcbiAgY29udmVydEhlYWRlcihoZWFkZXI6IERhdGFFbGVtZW50KTogT3B0aW9uPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLmNvbnZlcnRUYWJsZShoZWFkZXIpLmFuZFRoZW4oKGJhZGdlKSA9PiB7XG4gICAgICBpZiAoaGVhZGVyLmRhdGEudHlwZSA9PT0gXCJjb2RlLXF1YWxpdHlcIikge1xuICAgICAgICBjb25zdCBmID0gZW1vamkoaGVhZGVyLmRhdGEucmVzdWx0KTtcbiAgICAgICAgY29uc3QgaCA9IGAjIyMjIyAke2Z9ICAke2hlYWRlci5uYW1lfVxcbmA7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGBcbiAgICAgICAgKipRdWFsaXR5IFJhdGluZyoqOiAke2hlYWRlci5kYXRhLnF1YWxpdHlSYXRpbmd9XFxcXFxuYDtcbiAgICAgICAgY29uc3QgcG9saWN5ID0gcmVzdWx0VG9NYXJrZG93bihoZWFkZXIuZGF0YS5yZXN1bHREZXRhaWxzKTtcbiAgICAgICAgcmV0dXJuIFNvbWUoYFxuICR7aH1cbiBSZXBvcnQ6ICR7YmFkZ2V9XG4gJHtyZXN1bHR9XG4ke3BvbGljeX1cbmApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIE5vbmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnZlcnRUYWJsZSh0YWJsZTogRGF0YUVsZW1lbnQpOiBPcHRpb248c3RyaW5nPiB7XG4gICAgaWYgKHRhYmxlLmRhdGEudHlwZSA9PT0gXCJjb2RlLXF1YWxpdHlcIikge1xuICAgICAgY29uc3QgY29sb3IgPSByZXN1bHRUb0NvbG9yKHRhYmxlLmRhdGEucmVzdWx0KTtcbiAgICAgIGNvbnN0IGQgPSB0YWJsZS5kYXRhO1xuICAgICAgcmV0dXJuIFNvbWUoXG4gICAgICAgIGBbIVtiYWRnZV0oaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9xdWFsaXR5YCArXG4gICAgICAgICAgYC0ke2QucXVhbGl0eVJhdGluZ31gICtcbiAgICAgICAgICBgLSR7Y29sb3J9KV0oJHt0YWJsZS51cmx9KWBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBOb25lKCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgQ29kZVF1YWxpdHlSZXBvcnRDb252ZXJ0ZXIgfTtcbiJdfQ==