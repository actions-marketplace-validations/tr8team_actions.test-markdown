export class App {
    #input;
    #service;
    #io;
    run() {
        return this.#input
            .retrieve()
            .mapErr((x) => [x])
            .andThen((x) => this.#service.render(x))
            .run((o) => {
            this.#io.set("currentMarkdown", o.currentMarkdown);
            this.#io.set("historyMarkdown", o.historyMarkdown);
        })
            .err();
    }
    constructor(input, service, io) {
        this.#input = input;
        this.#service = service;
        this.#io = io;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLQSxNQUFNLE9BQU8sR0FBRztJQUNMLE1BQU0sQ0FBaUI7SUFDdkIsUUFBUSxDQUFnQjtJQUV4QixHQUFHLENBQVc7SUFFdkIsR0FBRztRQUNELE9BQU8sSUFBSSxDQUFDLE1BQU07YUFDZixRQUFRLEVBQUU7YUFDVixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbEIsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN2QyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUNULElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDckQsQ0FBQyxDQUFDO2FBQ0QsR0FBRyxFQUFFLENBQUM7SUFDWCxDQUFDO0lBRUQsWUFBWSxLQUFxQixFQUFFLE9BQXNCLEVBQUUsRUFBWTtRQUNyRSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUN4QixJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNoQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcHRpb24gfSBmcm9tIFwiLi9jb3JlL29wdGlvblwiO1xuaW1wb3J0IHsgSW5wdXRSZXRyaWV2ZXIgfSBmcm9tIFwiLi9pbnRlcmZhY2UvaW5wdXQtcmV0cmlldmVyXCI7XG5pbXBvcnQgeyBSZW5kZXJTZXJ2aWNlIH0gZnJvbSBcIi4vaW50ZXJmYWNlL3NlcnZpY2VcIjtcbmltcG9ydCB7IEFjdGlvbklPIH0gZnJvbSBcIi4vaW50ZXJmYWNlL2lvXCI7XG5cbmV4cG9ydCBjbGFzcyBBcHAge1xuICByZWFkb25seSAjaW5wdXQ6IElucHV0UmV0cmlldmVyO1xuICByZWFkb25seSAjc2VydmljZTogUmVuZGVyU2VydmljZTtcblxuICByZWFkb25seSAjaW86IEFjdGlvbklPO1xuXG4gIHJ1bigpOiBPcHRpb248RXJyb3JbXT4ge1xuICAgIHJldHVybiB0aGlzLiNpbnB1dFxuICAgICAgLnJldHJpZXZlKClcbiAgICAgIC5tYXBFcnIoKHgpID0+IFt4XSlcbiAgICAgIC5hbmRUaGVuKCh4KSA9PiB0aGlzLiNzZXJ2aWNlLnJlbmRlcih4KSlcbiAgICAgIC5ydW4oKG8pID0+IHtcbiAgICAgICAgdGhpcy4jaW8uc2V0KFwiY3VycmVudE1hcmtkb3duXCIsIG8uY3VycmVudE1hcmtkb3duKTtcbiAgICAgICAgdGhpcy4jaW8uc2V0KFwiaGlzdG9yeU1hcmtkb3duXCIsIG8uaGlzdG9yeU1hcmtkb3duKTtcbiAgICAgIH0pXG4gICAgICAuZXJyKCk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihpbnB1dDogSW5wdXRSZXRyaWV2ZXIsIHNlcnZpY2U6IFJlbmRlclNlcnZpY2UsIGlvOiBBY3Rpb25JTykge1xuICAgIHRoaXMuI2lucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy4jc2VydmljZSA9IHNlcnZpY2U7XG4gICAgdGhpcy4jaW8gPSBpbztcbiAgfVxufVxuIl19